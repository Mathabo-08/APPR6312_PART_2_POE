// File: Components/Account/Shared/RedirectToLogin.razor

@inject NavigationManager NavigationManager

@code {
    [CascadingParameter]
    private HttpContext? HttpContext { get; set; }

    protected override void OnInitialized()
    {
        var returnUrl = NavigationManager.ToBaseRelativePath(NavigationManager.Uri);

        // create a new Dictionary<string, object?>.
        var uri = NavigationManager.GetUriWithQueryParameters(
            "Account/Login", new Dictionary<string, object?> { ["ReturnUrl"] = returnUrl });

        if (HttpContext is not null)
        {
            HttpContext.Response.Redirect(uri);
        }
        else
        {
            NavigationManager.NavigateTo(uri);
        }
    }
}